<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Record 12 — Supervisor Checklist</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #333; padding: 6px; text-align: left; }
    th { background: #f2f2f2; text-align: center; }
    .controls { margin-bottom: 15px; }
    .controls button { margin-right: 10px; padding: 6px 12px; }
    @media print {
      @page { size: A4 portrait; margin: 15mm; }
    }
  </style>
</head>
<body>
  <div class="controls">
    <label>Date: <input type="date" id="checkDate"></label>
    <label>Supervisor: <input type="text" id="supervisor"></label>
    <button onclick="archiveData()">Archive</button>
    <button onclick="clearData()">Clear</button>
    <button onclick="window.print()">Print</button>
    <button onclick="history.back()">Back</button>
  </div>

  <h2>Record 12 — Supervisor Checklist</h2>

  <table id="checklistTable">
    <tr><th colspan="2">Equipment & Premises</th></tr>
    <tr><td>All equipment operating correctly</td><td><input type="checkbox"></td></tr>
    <tr><td>Premises structurally sound</td><td><input type="checkbox"></td></tr>
    <tr><td>Maintenance records completed (Record 7)</td><td><input type="checkbox"></td></tr>

    <tr><th colspan="2">Temperature Measuring Devices</th></tr>
    <tr><td>All thermometers calibrated/accurate</td><td><input type="checkbox"></td></tr>
    <tr><td>Staff trained in thermometer use</td><td><input type="checkbox"></td></tr>
    <tr><td>Calibration log completed (Record 7a)</td><td><input type="checkbox"></td></tr>

    <tr><th colspan="2">Pest Control</th></tr>
    <tr><td>Cleanliness maintained, no pest signs</td><td><input type="checkbox"></td></tr>
    <tr><td>Pest control treatments up to date</td><td><input type="checkbox"></td></tr>
    <tr><td>Cleaning records completed (6a–c)</td><td><input type="checkbox"></td></tr>
    <tr><td>Pest control log completed (Record 8)</td><td><input type="checkbox"></td></tr>

    <tr><th colspan="2">Staff Training</th></tr>
    <tr><td>All staff trained in hygiene & handling</td><td><input type="checkbox"></td></tr>
    <tr><td>Training records completed</td><td><input type="checkbox"></td></tr>

    <tr><th colspan="2">Customer Complaints</th></tr>
    <tr><td>Complaints monitored/addressed</td><td><input type="checkbox"></td></tr>
    <tr><td>Complaint log completed (Record 10)</td><td><input type="checkbox"></td></tr>

    <tr><th colspan="2">Annual Food Safety Program Review</th></tr>
    <tr><td>All forms & flow diagrams current</td><td><input type="checkbox"></td></tr>
    <tr><td>Corrective actions taken as needed</td><td><input type="checkbox"></td></tr>
    <tr><td>Details of review & auditor findings recorded</td><td><input type="checkbox"></td></tr>
  </table>

  <h3>Comments / Observations</h3>
  <textarea id="comments" style="width:100%;height:80px;"></textarea>

  <h3>Corrective Actions</h3>
  <textarea id="actions" style="width:100%;height:80px;"></textarea>

  <script>
    const STORAGE_KEY = "supervisorChecklist";

    function saveData() {
      const data = {
        date: document.getElementById("checkDate").value,
        supervisor: document.getElementById("supervisor").value,
        checks: Array.from(document.querySelectorAll("#checklistTable input[type='checkbox']")).map(cb => cb.checked),
        comments: document.getElementById("comments").value,
        actions: document.getElementById("actions").value
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    function loadData() {
      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (saved) {
        document.getElementById("checkDate").value = saved.date;
        document.getElementById("supervisor").value = saved.supervisor;
        document.querySelectorAll("#checklistTable input[type='checkbox']").forEach((cb, i) => cb.checked = saved.checks[i]);
        document.getElementById("comments").value = saved.comments;
        document.getElementById("actions").value = saved.actions;
      }
    }

    function archiveData() {
      const saved = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (!saved) { alert("Nothing to archive"); return; }
      const blob = new Blob([JSON.stringify(saved, null, 2)], {type: "application/json"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "supervisor_checklist_archive.json";
      a.click();
      URL.revokeObjectURL(url);
      clearData();
    }

    function clearData() {
      localStorage.removeItem(STORAGE_KEY);
      location.reload();
    }

    document.addEventListener("change", saveData);
    document.addEventListener("input", saveData);
    window.onload = loadData;
  </script>
</body>
</html>
